# Egg-spitting-Farm

启动方式：在命令行执行 `python gametest.py` 即可开始游戏体验。

## 游戏简介

Z-Trail Drop 是一款基于 2D 的休闲策略游戏，核心玩法围绕路径优化与效率管理展开。玩家并不直接操控球体，而是通过布置装置来影响整个系统的运行效率，在限定时间（60 秒）内让更多球体完成下落路径，从而获得更高分数并达成关卡目标。

## 游戏规则

- 每回合 60 秒，球体以固定时间间隔生成并在轨道上按物理加速度滚动。
- 左侧商店可购买放置型道具，右侧能力面板提供主动技能与被动天赋，随关卡逐步解锁。
- 每关有固定目标分数；计时结束后满足目标即通关，否则可立即在当前布局基础上重试或回到第 1 关重新规划。
- 同一个 Z 轨道节点只能容纳一个道具/能力效果（包括管道、减速模块、补给垫、风暴、传送门、加速带等），占用后其他道具无法在该点放置，可通过右键回收后再重排。
- 已放置的道具可以右键收回，系统返还少量金币并计入补给垫能量；但回收会立即释放该节点，使其他装置可再次占用。
- 关卡失败后按 `Space` 会回到第 1 关；成功后按 `Enter` 可继续下一关。无论成败，都可按 `R` 立即重置至第 1 关重新配置。

## 道具与能力

### 商店道具（左侧）

- **垂直管道（Vertical Pipe）**：连接轨道上下两个位置，让球体跳过一段长路径。
- **减速模块（Slow Block）**：暂时降低经过球体的速度并提供额外得分，适合瓶颈位置。
- **涡轮跑道（Turbo Pipe）**：在一小段轨道上提供速度与得分增益，但与其它装置互斥，且不能与道具重叠。
- **传送门（Portal Pair）**：成对购入，激活后短时间内提供跨段传送，然后进入冷却，可在冷却期通过点击轨道附近为其加速降温。

### 特殊道具（右侧能力面板）

- **速度冲刺（Speed Surge）**：激活后 3 秒内，所有球体获得 ×2 移动速度。
- **补给垫部署（Supply Pad）**：在轨道节点放置后，每回收/删除 3 个道具，就会随机投放 3-5 个特殊道具在场景里。
- **风暴按钮（Egg Storm）**：部署后会持续 5 秒，计算期间经过的每个球体，并且直接结算分数。

### 身份技能（Passive Skills，右下角）

- **幸运蛋（Lucky Egg）**：每第 5 个蛋升级为 +10 分超级蛋。
- **金币增益（Coin Rain）**：自动 +5 金币/秒，加快购买节奏。
- **急速孵化（Rapid Nest）**：每 0.5 秒额外生成 1 枚鸡蛋。

所有能力共享“节点互斥”规则：被动/主动工具一旦占据节点或轨道区间，其他效果必须寻找空位。

## 操作提示

- **左键点击**：
	- 点击商店按钮购买道具，再次左键在轨道空位放置；
	- 点击能力面板触发速度冲刺、风暴或补给垫等主动技能；
	- 在技能面板中选择/切换被动技能。
- **右键点击**：在轨道空位收回已有道具，返还金币并为补给垫充能，可腾出节点供其它道具重新布局。
- **键盘控制**：`ESC` 退出游戏；`Enter` 在通关后进入下一关；`Space` 在失败界面返回第 1 关；`R` 无条件重置；其余时间只需鼠标即可完成全部操作。
- **道具切换**：一次只能持有一种待放置道具（包括风暴、补给垫、传送门等）。若正在放置 A 道具，需先完成或取消放置后才能购买 B 道具。
- **布局建议**：新品道具默认锁定，随着关卡提升逐步解锁；记得在风暴/补给垫等大型道具周围预留空间，避免因为节点占满而错失布置机会。

## 成长与关卡推进

- 随关卡进度逐步解锁新道具与机制，难度同步提升。
- 玩家使用金币购买管道与装置；失败后可立刻重试，鼓励反复优化布局。

## 设计理念

游戏强调系统层面的规划与思考，而非即时操作反应。玩家需关注：

- 路径是否存在冗余或浪费；
- 球体流动是否顺畅高效；
- 各类装置是否形成互补协同；
- 节点占用规则是否被合理利用，以免彼此挤占关键路段。

核心理念是“效率越高，得分越高”，力求打造类似“优化一台机器”的策略体验。


### 本地运行步骤（含 GitHub 仓库）

1. 克隆仓库：`git clone https://github.com/<your-account>/Egg-spitting-Farm.git`
2. 进入目录：`cd Egg-spitting-Farm`
3. （可选）创建虚拟环境：`python -m venv .venv && .venv\Scripts\activate`（Windows）或 `source .venv/bin/activate`（macOS/Linux）。
4. 安装依赖：`pip install -r requirements.txt`
5. 运行原生 pygame 版本：`python gametest.py`
	- 左键/右键直接操作窗口，即与 README 中的规则一致。
6.浏览器访问控制台输出的地址（默认 http://127.0.0.1:7860），即可看到实时画面。
	- 左键点击游戏画面即可购买/放置道具；
	- 切换右侧的 “Remove / Right Click” 模式，可以模拟右键回收；
	- 通过 Pause/Retry/Next/Reset 按钮可快速控制关卡进度。
